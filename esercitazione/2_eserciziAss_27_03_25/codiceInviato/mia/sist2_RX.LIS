00000000                                     1  **************AREA DATI******************************************
00008000                                     2  	ORG	$8000
00008000                                     3  RIS		DS.W		1
00008002  0000                               4  INDX		DC.W		0		;Conta le word ricevute.
00008004                                     5  
00008004  =00002005                          6  PIACA		EQU		$2005
00008004  =00002004                          7  PIADA		EQU		$2004
00008004  =00008100                          8  ROUT		EQU		$8100
00008004                                     9  *********************************************************************
00008200                                    10  	ORG	$8200
00008200  4EB9 00008214                     11  MAIN		JSR	DVAIN
00008206  40C0                              12  		MOVE.W	SR,D0
00008208  0240 D8FF                         13  		ANDI.W	#$D8FF,D0	;<- passo a stato utente e abilito interruzioni
0000820C  46C0                              14  		MOVE.W	D0,SR
0000820E                                    15  
0000820E                                    16  *************************************************************************
0000820E  4EF9 0000820E                     17  LOOP	JMP	LOOP
00008214                                    18  **************************************************************************
00008214  11FC 0000 2005                    19  DVAIN		MOVE.B	#0,PIACA
0000821A  11FC 0000 2004                    20  		MOVE.B	#$00,PIADA
00008220  11FC 0025 2005                    21  		MOVE.B	#%00100101,PIACA
00008226  4E75                              22  		RTS
00008228                                    23  **************************************************************************
00008228  267C 00008100                     24  ESE	MOVEA.L	#ROUT,A3	
0000822E  4E93                              25  	JSR	(A3)
00008230  4EF9 0000820E                     26  	JMP 	LOOP
00008236                                    27  
00008236                                    28  *********************************************************************************************************************
00008236                                    29  * 	Interruzione che riceve una word e la salva in memoria. Se riceve RTS lo salva e poi esegue codice
00008236                                    30  **********************************************************************************************************************
00008500                                    31  	ORG	$8500
00008500  2F08                              32  INT2	MOVE.L	A0,-(A7)
00008502  2F09                              33  	MOVE.L	A1,-(A7)
00008504  2F0A                              34  	MOVE.L	A2,-(A7)
00008506  2F00                              35  	MOVE.L	D0,-(A7)
00008508                                    36  
00008508  227C 00008100                     37  	MOVE.L	#$8100,A1
0000850E  207C 00002004                     38  	MOVEA.L	#PIADA,A0
00008514  247C 00008002                     39  	MOVEA.L	#INDX,A2
0000851A  3012                              40  	MOVE.W	(A2),D0
0000851C                                    41  
0000851C  1390 0000                         42  	MOVE.B	(A0),(A1,D0)
00008520                                    43  
00008520  0C31 0075 0000                    44  	CMP.B		#$75,(A1,D0)
00008526  6700 FD00                         45  	BEQ	ESE
0000852A                                    46  
0000852A  5240                              47  	ADD.W		#1,D0
0000852C  3480                              48  	MOVE.W	D0,(A2)
0000852E                                    49  
0000852E  201F                              50  	MOVE.L	(A7)+,D0
00008530  245F                              51  	MOVE.L	(A7)+,A2
00008532  225F                              52  	MOVE.L	(A7)+,A1
00008534  205F                              53  	MOVE.L	(A7)+,A0
00008536                                    54  
00008536  4E73                              55  	RTE
00008538                                    56  ***************************************************************************
00008538                                    57  	END	MAIN

No errors detected
No warnings generated
