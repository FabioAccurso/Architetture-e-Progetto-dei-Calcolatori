00000000                                     1  ***************   SISTEMA A -- Ricevitore ******************
00000000                                     2  ***********************************************
00000000                                     3  ************ AREA DATI **********************
00008000                                     4  	ORG	$8000
00008000  00                                 5  IB	DC.B	0	;Messaggi ricevuti nell'attuale iterazione da B
00008001  00                                 6  IC	DC.B	0	;Messaggi ricevuti nell'attuale iterazione da C
00008002  00                                 7  INDN	DC.B	0	;Numero caratteri attuale comunicazione
00008003  00                                 8  INDK	DC.B	0	;Numero Iterazioni
00008004  00                                 9  SEM	DC.B	0	;Semaforo da gestire con TAS
00008005  81                                10  POS	DC.B	%10000001	;Variabile possesso che puo essere -1,0,1. Di default a -1 ovvero libero
00008006                                    11  
00008006  =00000003                         12  K			EQU	3
00008006  =00000003                         13  N			EQU	3
00008006  =00002005                         14  PIACAB		EQU		$2005
00008006  =00002004                         15  PIADAB		EQU 		$2004
00008006  =00002009                         16  PIACAC			EQU		$2009
00008006  =00002008                         17  PIADAC		EQU 		$2008
00008006                                    18  
00008006                                    19  **********************************************************
00008006  4EB9 0000801A                     20  MAIN		JSR	DVAIN
0000800C  40C0                              21  		MOVE.W	SR,D0
0000800E  0240 D8FF                         22  		ANDI.W	#$D8FF,D0	;<- passo a stato utente e abilito interruzioni
00008012  46C0                              23  		MOVE.W	D0,SR
00008014                                    24  
00008014                                    25  *************************************************************************
00008014  4EF9 00008014                     26  LOOP	JMP	LOOP
0000801A                                    27  **************************************************************************
0000801A                                    28  
0000801A                                    29  **************************************************
0000801A                                    30  *	Subroutine per inizializzare le 2 PIA
0000801A                                    31  **************************************************
0000801A  11FC 0000 2005                    32  DVAIN		MOVE.B	#0,PIACAB
00008020  11FC 0000 2004                    33  		MOVE.B	#$00,PIADAB
00008026  11FC 0025 2005                    34  		MOVE.B	#%00100101,PIACAB
0000802C                                    35  
0000802C  11FC 0000 2009                    36  		MOVE.B	#0,PIACAC
00008032  11FC 0000 2008                    37  		MOVE.B	#$00,PIADAC
00008038  11FC 0025 2009                    38  		MOVE.B	#%00100101,PIACAC
0000803E                                    39  
0000803E  4E75                              40  		RTS
00008040                                    41  ***************************************************************
00008040                                    42  *	ISR A relativa a ricezione da B
00008040                                    43  ***************************************************************
00008040                                    44  
00008040                                    45  
00008040                                    46  
00008040                                    47  ***************************************************************
00008040                                    48  *	ISR A relativa a ricezione da C
00008040                                    49  ***************************************************************
00008040                                    50  
00008040                                    51  
00008040                                    52  
00008040                                    53  *******************************************************
00008040                                    54  	END	MAIN

No errors detected
No warnings generated
